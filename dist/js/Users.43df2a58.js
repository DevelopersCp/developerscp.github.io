(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Users"],{"4de4":function(t,e,a){"use strict";var n=a("23e7"),r=a("b727").filter,i=a("1dde"),s=a("ae40"),o=i("filter"),c=s("filter");n({target:"Array",proto:!0,forced:!o||!c},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},ed81:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav-bar",{attrs:{name:t.title}}),a("v-container",{staticClass:"text-center"},[a("router-link",{attrs:{to:"/adduser"}},[a("v-btn",{attrs:{color:"#E47911",large:"",height:"40px",dark:""}},[a("v-icon",{attrs:{left:"",dark:""}},[t._v(" mdi-plus ")]),t._v(" Add a new user ")],1)],1)],1),a("v-container",{staticClass:"text-center"},[a("v-card",{staticClass:"ma-auto",attrs:{width:"90%",outlined:""}},[a("br"),a("v-card",{staticClass:"ma-auto",attrs:{width:"75%",tile:""}},[a("p",{staticClass:"font-weight-bold text-left px-3 py-1"},[t._v("Types of users")]),a("v-divider"),a("v-expansion-panels",{attrs:{focusable:""}},t._l(t.types,(function(e){return a("v-expansion-panel",{key:e.name},[a("v-expansion-panel-header",{staticClass:"font-weight-light text-left px-2"},[t._v(t._s(e.name))]),a("v-expansion-panel-content",[a("v-card",[a("v-layout",[a("v-col",{staticClass:"text-right"},[a("v-btn",{staticClass:"mx-auto",attrs:{icon:"",right:""},on:{click:t.activeExport}},[a("v-icon",{attrs:{size:"24px",color:t.export_btn_color}},[t._v(" mdi-file-move ")])],1)],1)],1),a("v-card-title",[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{attrs:{headers:t.headers,search:t.search,items:e.value,loading:t.loading,"loading-text":"Loading... Please wait","hide-default-footer":"",page:t.page,"items-per-page":t.itemsPerPage},on:{"update:page":function(e){t.page=e},"page-count":function(e){t.pageCount=e}},scopedSlots:t._u([{key:"item.first_name",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.first_name+" "+a.last_name)+" ")]}},{key:"item.unique_id",fn:function(e){var n=e.item;return[t.select?a("v-menu",{attrs:{top:"","offset-x":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:"",dark:""}},"v-btn",r,!1),n),[a("v-icon",{staticClass:"mb-2",attrs:{right:"",color:"#E47911",size:"26px"}},[t._v(" mdi-arrow-down-drop-circle ")])],1)]}}],null,!0)},[a("v-list",[a("v-list-item",{attrs:{link:""}},[a("v-list-item-title",[a("router-link",[t._v(" Show user profile ")])],1)],1),a("v-list-item",{attrs:{link:""}},[a("v-list-item-title",[a("router-link",{attrs:{to:{name:"UpdateUser",params:{id:n.unique_id}}}},[t._v(" Update user profile ")])],1)],1),a("v-list-item",{attrs:{link:""}},[a("v-list-item-title",{on:{click:function(e){return t.delete_user(n.unique_id)}}},[t._v(" Delete register ")])],1)],1)],1):a("v-checkbox",{staticClass:"my-n3",attrs:{value:n.unique_id,color:"#E47911"},model:{value:t.idUser,callback:function(e){t.idUser=e},expression:"idUser"}})]}}],null,!0)}),a("v-pagination",{attrs:{length:t.pageCount},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1),t.select?t._e():a("v-row",[a("v-col",[a("v-btn",{staticClass:"mx-4 my-2",attrs:{color:"#989898",dark:""},on:{click:t.desactivarBtn}},[t._v(" CANCEL ")]),a("v-btn",{staticClass:"mx-4 my-2",attrs:{color:"#E47911",dark:""},on:{click:t.export_users}},[t._v(" EXPORT ")])],1)],1)],1)],1)})),1)],1),a("br")],1)],1),a("footer-nav")],1)},r=[],i=(a("4de4"),a("4160"),a("4fad"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("2b3d"),a("3835")),s=a("d000"),o=a("fd2d"),c=a("35ca"),l=a("3d20"),u=a.n(l),d={components:{NavBar:s["a"],FooterNav:o["a"]},data:function(){return{title:"USERS",select:!0,export_btn_color:"#000",loading:!0,page:1,pageCount:0,itemsPerPage:5,search:"",users_admin:[],users_clients:[],idUser:[],headers:[{text:"Name",value:"first_name"},{text:"Actions",value:"unique_id",sortable:!1,search:!1}],types:[{name:"Admins",value:[]},{name:"Clients",value:[]}]}},mounted:function(){var t=this;c["a"].list_admin().then((function(e){console.log(e),t.types[0].value=e.filter((function(t){return t.is_staff})),t.types[1].value=e.filter((function(t){return!t.is_staff})),t.loading=!1})).catch((function(t){var e=t.response.data,a="";Object.entries(e).forEach((function(t){var e=Object(i["a"])(t,2),n=e[0],r=e[1];a+=n+": "+r+" \n "})),u.a.fire({icon:"error",title:"Error",text:a})}))},methods:{activeExport:function(){this.select=!this.select,this.export_btn_color=this.select?"#000":"#E47911"},desactivarBtn:function(){this.select=!this.select,this.export_btn_color="#000"},refresh_list:function(){var t=this;this.loading=!0,c["a"].list_admin().then((function(e){t.types[0].value=e.filter((function(t){return t.is_staff})),t.types[1].value=e.filter((function(t){return!t.is_staff})),t.loading=!1})).catch((function(t){var e=t.response.data,a="";Object.entries(e).forEach((function(t){var e=Object(i["a"])(t,2),n=e[0],r=e[1];a+=n+": "+r+" \n "})),u.a.fire({icon:"error",title:"Error",text:a})}))},delete_user:function(t){var e=this;u.a.fire({icon:"question",title:"Confirm",text:"Are you sure you want to delete this user?",confirmButtonText:"YES",cancelButtonText:"NO",showCancelButton:!0}).then((function(a){a.isConfirmed&&(c["a"].delete(t),u.a.fire({icon:"success",title:"Success",text:"User successfully removed."}).then((function(){e.refresh_list()})))})).catch((function(t){var e=t.response.data,a="";Object.entries(e).forEach((function(t){var e=Object(i["a"])(t,2),n=e[0],r=e[1];a+=n+": "+r+" \n "})),u.a.fire({icon:"error",title:"Error",text:a})}))},export_users:function(){c["a"].export_users(this.idUser).then((function(t){var e=window.URL.createObjectURL(new Blob([t.data])),a=document.createElement("a");a.href=e,a.setAttribute("download","users.xlsx"),document.body.appendChild(a),a.click()})).catch((function(t){var e=t.response.data,a="";Object.entries(e).forEach((function(t){var e=Object(i["a"])(t,2),n=e[0],r=e[1];a+=n+": "+r+" \n "})),u.a.fire({icon:"error",title:"Error",text:a})}))}}},f=d,v=a("2877"),p=Object(v["a"])(f,n,r,!1,null,null,null);e["default"]=p.exports}}]);
//# sourceMappingURL=Users.43df2a58.js.map