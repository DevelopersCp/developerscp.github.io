(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AddReferral"],{"58a6":function(e,r,t){"use strict";t.r(r);var n=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("nav-bar",{attrs:{name:e.title}}),t("v-card",{staticClass:"ma-1",attrs:{cols:"12"}},[t("v-container",[t("v-row",[t("v-col",{attrs:{cols:"12"}},[t("v-select",{staticClass:"mb-n5",attrs:{items:e.stores,label:"*Store owner",outlined:"",dense:""},model:{value:e.referral.store_owner,callback:function(r){e.$set(e.referral,"store_owner",r)},expression:"referral.store_owner"}})],1),t("v-col",{attrs:{cols:"12"}},[t("v-text-field",{staticClass:"mb-n5",attrs:{outlined:"",dense:"",label:"*Name",required:""},model:{value:e.referral.name,callback:function(r){e.$set(e.referral,"name",r)},expression:"referral.name"}})],1),t("v-col",{attrs:{cols:"12"}},[t("v-text-field",{staticClass:"mb-n5",attrs:{outlined:"",dense:"",label:"*Destination email",required:""},model:{value:e.referral.destination_email,callback:function(r){e.$set(e.referral,"destination_email",r)},expression:"referral.destination_email"}})],1),t("v-col",{attrs:{cols:"12"}},[t("v-text-field",{staticClass:"mb-n5",attrs:{outlined:"",dense:"",label:"*Phone number",required:""},model:{value:e.referral.phone_number,callback:function(r){e.$set(e.referral,"phone_number",r)},expression:"referral.phone_number"}})],1),t("v-col",[t("router-link",{attrs:{to:"/referrals"}},[t("v-btn",{staticClass:"mx-4 my-2",attrs:{color:"#989898",dark:""}},[e._v(" GO BACK ")])],1),t("v-btn",{staticClass:"mx-4 my-2",attrs:{color:"#E47911",dark:"",loading:e.loading},on:{click:e.add_referral}},[e._v(" SAVE ")])],1)],1)],1)],1)],1)},a=[],o=(t("4160"),t("b0c0"),t("4fad"),t("159b"),t("3835")),s=t("d000"),l=t("65b4"),i=t("3d20"),c=t.n(i),u={components:{NavBar:s["a"]},data:function(){return{title:"ADD REFERRAL",loading:!1,referral:{store_owner:"",name:"",destination_email:"",phone_number:""},stores:[]}},mounted:function(){var e=this;l["a"].list_owners().then((function(r){for(var t=0;t<r.length;t++)e.stores.push({text:r[t].store.name+" - "+r[t].owner.username,value:r[t].id})})).catch((function(e){var r=e.response.data,t="";Object.entries(r).forEach((function(e){var r=Object(o["a"])(e,2),n=r[0],a=r[1];t+=n+": "+a+" \n "})),c.a.fire({icon:"error",title:"Error",text:t})}))},methods:{add_referral:function(){var e=this;this.loading=!0,l["a"].add_referral(this.referral).then((function(r){c.a.fire({icon:"success",title:"Success",text:"The refered has been successfully added."}).then((function(){e.loading=!1,e.$router.push("/referrals")}))})).catch((function(r){e.loading=!1;var t=r.response.data,n="";Object.entries(t).forEach((function(e){var r=Object(o["a"])(e,2),t=r[0],a=r[1];n+=t+": "+a+" \n "})),c.a.fire({icon:"error",title:"Error",text:n})}))}}},f=u,d=t("2877"),m=Object(d["a"])(f,n,a,!1,null,null,null);r["default"]=m.exports},"65b4":function(e,r,t){"use strict";t("b0c0");var n=t("d4ec"),a=t("bee2"),o=t("ab58"),s=t("3d20"),l=t.n(s),i=function(){function e(){Object(n["a"])(this,e)}return Object(a["a"])(e,[{key:"list_admin",value:function(){return o["a"].get("referral/all/").then((function(e){return e.data}))}},{key:"list_referrals_store",value:function(e){return o["a"].get("referral/"+e+"/stores/").then((function(e){return e.data}))}},{key:"add_referral",value:function(e){return o["a"].post("referral/",{store_owner:e.store_owner,name:e.name,destination_email:e.destination_email,phone_number:e.phone_number}).then((function(e){return e.data}))}},{key:"list_owners",value:function(){return o["a"].get("stores_owner/").then((function(e){return e.data}))}},{key:"delete_referrals",value:function(e){return o["a"].post("referral/remove_referrals/",{id_referrals:e})}},{key:"update",value:function(e,r){return o["a"].put("referral/"+r+"/",{store_owner:e.store_owner,name:e.name,destination_email:e.destination_email,phone_number:e.phone_number}).then((function(e){return e.data})).catch((function(e){console.log(e.response.data),l.a.fire({icon:"error",title:"Error",text:e.response.data["non_field_errors"]})}))}},{key:"get",value:function(e){return o["a"].get("referral/"+e+"/").then((function(e){return e.data})).catch((function(e){console.log(e.response.data),l.a.fire({icon:"error",title:"Error",text:e.response.data["non_field_errors"]})}))}}]),e}();r["a"]=new i}}]);
//# sourceMappingURL=AddReferral.d8e91234.js.map