(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Profile"],{1182:function(t,e,a){},"34ba":function(t,e,a){"use strict";a("1182")},"35ca":function(t,e,a){"use strict";var r=a("d4ec"),n=a("bee2"),s=a("ab58"),i=(a("3d20"),function(){function t(){Object(r["a"])(this,t)}return Object(n["a"])(t,[{key:"list_admin",value:function(){return s["a"].get("admin/users/").then((function(t){return t.data}))}},{key:"delete",value:function(t){return s["a"].delete("admin/users/"+t+"/").then((function(t){return t.data}))}},{key:"register",value:function(t){var e=new FormData;return e.append("email",t.email),e.append("username",t.username),e.append("img",t.img),e.append("is_staff",t.staff),e.append("phone_number",t.phone),e.append("password",t.password),e.append("confirm_password",t.confirm_password),e.append("first_name",t.firstname),e.append("last_name",t.lastname),s["a"].post("admin/users/",e,{headers:{"content-type":"multipart/form-data"}}).then((function(t){return t.data}))}},{key:"update",value:function(t,e){var a=new FormData;return a.append("email",t.email),a.append("username",t.username),a.append("is_staff",t.staff),t.img&&a.append("img",t.img),a.append("phone_number",t.phone),a.append("first_name",t.firstname),a.append("last_name",t.lastname),s["a"].put("user/"+e+"/update_user/",a,{headers:{"content-type":"multipart/form-data"}}).then((function(t){return t.data}))}},{key:"get",value:function(t){return s["a"].get("admin/users/"+t+"/").then((function(t){return t.data}))}},{key:"get_profile",value:function(){return s["a"].get("user/profile/").then((function(t){return t.data}))}},{key:"update_profile",value:function(t,e){var a=new FormData;return a.append("email",t.email),a.append("username",t.username),a.append("is_staff",!1),t.img&&a.append("img",t.img),a.append("phone_number",t.phone),a.append("first_name",t.firstname),a.append("last_name",t.lastname),s["a"].put("user/"+e+"/update_user/",a,{headers:{"content-type":"multipart/form-data"}}).then((function(t){return t.data}))}}]),t}());e["a"]=new i},"65b4":function(t,e,a){"use strict";a("b0c0");var r=a("d4ec"),n=a("bee2"),s=a("ab58"),i=(a("3d20"),function(){function t(){Object(r["a"])(this,t)}return Object(n["a"])(t,[{key:"list_admin",value:function(){return s["a"].get("referral/all/").then((function(t){return t.data}))}},{key:"list_referrals_store",value:function(t){return s["a"].get("referral/"+t+"/stores/").then((function(t){return t.data}))}},{key:"list_user_referrals",value:function(t){return s["a"].get("referral/"+t+"/user_referrals/").then((function(t){return t.data}))}},{key:"add_referral",value:function(t){return s["a"].post("referral/",{store_owner:t.store_owner,name:t.name,destination_email:t.destination_email,phone_number:t.phone_number}).then((function(t){return t.data}))}},{key:"list_owners",value:function(){return s["a"].get("stores_owner/").then((function(t){return t.data}))}},{key:"delete_referrals",value:function(t){return s["a"].post("referral/remove_referrals/",{id_referrals:t})}},{key:"update",value:function(t,e){return s["a"].put("referral/"+e+"/",{store_owner:t.store_owner,name:t.name,destination_email:t.destination_email,phone_number:t.phone_number}).then((function(t){return t.data}))}},{key:"get",value:function(t){return s["a"].get("referral/"+t+"/").then((function(t){return t.data}))}}]),t}());e["a"]=new i},c66d:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav-bar",{attrs:{name:t.title}}),a("v-container",{staticClass:"text-center"},[a("img",{attrs:{src:t.img,alt:"",width:"100px"}}),a("h5",[t._v(" "+t._s(t.data_user.username)+" ")]),a("h6",[t._v(" "+t._s(t.data_store?t.data_store.name:"")+" ")])]),a("v-card",{staticClass:"mx-auto my-auto"},[a("v-container",[a("v-tabs",{attrs:{"background-color":"primary",dark:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab",[t._v(" Personal info ")]),a("v-tab",[t._v(" Stores Owned ")]),a("v-tab",[t._v(" Referrals ")])],1),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-row",[a("v-col",{staticClass:"text-left",attrs:{cols:"10"}},[a("v-card-subtitle",[t._v(" About Me ")])],1),a("v-spacer"),a("v-col",{staticClass:"text-right",attrs:{cols:"2"}},[a("v-btn",{attrs:{icon:""}},[a("router-link",{attrs:{to:{name:"UpdateUser",params:{id:t.data_user.unique_id}}}},[a("v-icon",{attrs:{right:""}},[t._v(" mdi-pencil ")])],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("h6",{staticClass:"text-left"},[t._v(" Full name ")]),a("v-text-field",{attrs:{outlined:"",dense:"",disabled:"",value:t.fullname}})],1),t._l(t.options,(function(e,r){return a("v-col",{key:r,attrs:{cols:"12",sm:"6"}},[a("h6",{staticClass:"text-left"},[t._v(" "+t._s(e.text)+" ")]),a("v-text-field",{attrs:{outlined:"",dense:"",disabled:"",value:e.data}})],1)}))],2)],1)],1),a("v-tab-item",[a("stores-owned")],1),a("v-tab-item",[a("refe")],1)],1)],1)],1),a("footer-nav")],1)},n=[],s=(a("4160"),a("4fad"),a("159b"),a("3835")),i=a("d000"),o=a("fd2d"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{flat:""}},[a("br"),a("v-row",{staticClass:"text-right"},[a("v-col",{staticClass:"mb-n2 text-rigt",attrs:{cols:"12"}},[a("router-link",{staticClass:"mr-2",attrs:{to:"/addstore"}},[a("v-icon",{attrs:{color:"#E47911",size:"16px",left:""}},[t._v(" mdi-pencil ")]),t._v(" Add Store ")],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,loading:t.loading,"loading-text":"Loading... Please wait","items-per-page":5,"item-key":"name"},scopedSlots:t._u([{key:"item.store",fn:function(e){var r=e.item;return[t._v(" "+t._s(r.store.name)+" | "),a("router-link",{attrs:{to:t.getLink(r.store.unique_id)}},[t._v(" View Store "),a("v-icon",{staticClass:"ml-1",attrs:{color:"#E47911",size:"16px"}},[t._v(" mdi-eye ")])],1)]}},{key:"item.status",fn:function(e){var r=e.item;return[a("v-chip",{attrs:{color:t.getColor(r.store.status),dark:""}},[t._v(" "+t._s(t._f("name_status")(r.store.status))+" ")])]}}])})],1)},l=[],c=a("02e9"),d=a("3d20"),f=a.n(d),m={name:"StoresOwned",data:function(){return{headers:[{text:"Store",align:"start",value:"store"},{text:"Status",value:"status"}],items:[],loading:!0}},filters:{name_status:function(t){switch(t){case"A":return"Active";case"ED":return"Everyday";case"S":return"Suspended";case"V":return"Vacation";case"DA":return"Denied activation";default:return"Pending activation"}}},computed:{idUser:function(){return this.$store.state.auth.user.unique_id}},methods:{getLink:function(t){return"/viewstore/"+t},getColor:function(t){return"A"==t?"green":"ED"==t?"purple":"S"==t?"red":"DA"==t?"gray":"V"==t?"yellow":"orange"},refresh_get:function(){var t=this;c["a"].stores_owned(this.idUser).then((function(e){t.items=e,t.loading=!1})).catch((function(e){var a=e.response.data,r="";Object.entries(a).forEach((function(t){var e=Object(s["a"])(t,2),a=e[0],n=e[1];r+=a+": "+n+" \n "})),t.loading=!1,f.a.fire({icon:"error",title:"Error",text:r})}))}},mounted:function(){this.refresh_get()}},p=m,v=a("2877"),_=Object(v["a"])(p,u,l,!1,null,null,null),h=_.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{flat:""}},[a("br"),a("v-row",{staticClass:"text-right"},[a("v-col",{staticClass:"mb-n2 text-rigt",attrs:{cols:"12"}},[a("router-link",{staticClass:"mr-2",attrs:{to:"/addreferral"}},[a("v-icon",{attrs:{color:"#E47911",size:"16px",left:""}},[t._v(" mdi-pencil ")]),t._v(" Add Refer ")],1)],1)],1),a("v-data-table",{attrs:{headers:t.headers,items:t.referrals,loading:t.loading,"loading-text":"Loading... Please wait","hide-default-footer":"",page:t.page,"items-per-page":t.itemsPerPage},on:{"update:page":function(e){t.page=e},"page-count":function(e){t.pageCount=e}},scopedSlots:t._u([{key:"item.unique_id",fn:function(e){var r=e.item;return[a("router-link",{attrs:{to:{name:"ViewReferral",params:{id:r.unique_id}}}},[t._v(" View referral ")])]}}])})],1)},b=[],x=a("65b4"),k={data:function(){return{loading:!1,page:1,pageCount:0,itemsPerPage:5,referrals:[],headers:[{text:"Referral",value:"name"},{text:"Date",value:"registered"},{text:"Referred to",value:"by"},{text:"Actions",value:"unique_id",sortable:!1}]}},computed:{idUser:function(){return this.$router.params?this.$router.params.id:this.$store.state.auth.user.unique_id}},methods:{list_user_referrals:function(){var t=this;this.loading=!0,x["a"].list_user_referrals(this.idUser).then((function(e){console.log(e),t.referrals=e,t.loading=!1})).catch((function(t){var e=t.response.data,a="";Object.entries(e).forEach((function(t){var e=Object(s["a"])(t,2),r=e[0],n=e[1];a+=r+": "+n+" \n "})),f.a.fire({icon:"error",title:"Error",text:a})}))}},mounted:function(){this.list_user_referrals()}},w=k,y=Object(v["a"])(w,g,b,!1,null,null,null),C=y.exports,E=a("35ca"),O={components:{NavBar:i["a"],FooterNav:o["a"],StoresOwned:h,Refe:C},data:function(){return{title:"PROFILE",tab:null,fullname:"",img:"",options:[{text:"Phone number",data:""},{text:"Email",data:""},{text:"Admin",data:""},{text:"Unique ID",data:""},{text:"Username",data:""},{text:"Joined on",data:""}]}},mounted:function(){var t=this,e=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];E["a"].get_profile().then((function(a){var r=new Date(a.date_joined),n=r.getDate()+"-"+e[r.getMonth()]+"-"+r.getFullYear();t.fullname=a.first_name+" "+a.last_name,t.options[0].data=a.phone_number,t.options[1].data=a.email,t.options[2].data=a.is_staff?"Yes":"No",t.options[3].data=a.unique_id,t.options[4].data=a.username,t.options[5].data=n,t.img="https://trodapp.com"+a.img})).catch((function(t){var e=t.response.data,a="";Object.entries(e).forEach((function(t){var e=Object(s["a"])(t,2),r=e[0],n=e[1];a+=r+": "+n+" \n "})),f.a.fire({icon:"error",title:"Error",text:a})}))},computed:{data_store:function(){return this.$store.state.auth.store_user},data_user:function(){return this.$store.state.auth.user}}},S=O,j=Object(v["a"])(S,r,n,!1,null,null,null);e["default"]=j.exports},d000:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-toolbar",{attrs:{dense:"",color:"#000",dark:""}},[a("v-btn",{attrs:{icon:""}},[a("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}})],1),a("v-toolbar-title",[t._v(t._s(t.name))]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.logout()}}},[a("v-icon",[t._v(" mdi-logout ")])],1)],1),a("v-navigation-drawer",{attrs:{absolute:"",temporary:"",color:"#000",dark:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{attrs:{nav:"",dense:""}},[a("v-list-item-group",{attrs:{"active-class":"gray--text text--accent-4",dark:""},model:{value:t.group,callback:function(e){t.group=e},expression:"group"}},[a("router-link",{attrs:{to:"/dashboard"}},[a("v-list-item",[a("v-icon",[t._v(" mdi-home ")]),t._v(" "),a("v-list-item-title",[t._v(" HOME ")])],1)],1),a("router-link",{attrs:{to:"/contact"}},[a("v-list-item",[a("v-icon",[t._v(" mdi-phone ")]),t._v(" "),a("v-list-item-title",[t._v(" CONTACT ")])],1)],1),a("router-link",{attrs:{to:"/faqs"}},[a("v-list-item",[a("v-icon",[t._v(" mdi-home ")]),t._v(" "),a("v-list-item-title",[t._v(" FAQ'S ")])],1)],1),a("router-link",{attrs:{to:"/profile"}},[a("v-list-item",[a("v-icon",[t._v(" mdi-account ")]),t._v(" "),a("v-list-item-title",[t._v(" PROFILE ")])],1)],1)],1)],1)],1)],1)},n=[],s=(a("4160"),a("4fad"),a("159b"),a("3835")),i=a("35ca"),o=a("3d20"),u=a.n(o),l={name:"NavBar",props:["name"],data:function(){return{drawer:!1,group:null}},mounted:function(){var t=this;i["a"].get_profile().then().catch((function(e){var a=e.response.data,r="";Object.entries(a).forEach((function(t){var e=Object(s["a"])(t,2),a=e[0],n=e[1];r+=a+": "+n+" \n "})),console.log(e.response.status),401==e.response.status?u.a.fire({icon:"error",title:"Error",text:"Session expired. Please log in again."}).then((function(){localStorage.removeItem("user"),t.$router.push("/")})):u.a.fire({icon:"error",title:"Error",text:r})}))},computed:{loggedIn:function(){return this.$store.state.auth.status.loggedIn}},methods:{logout:function(){this.$store.dispatch("auth/logout")}},watch:{group:function(){this.drawer=!1}}},c=l,d=(a("34ba"),a("2877")),f=Object(d["a"])(c,r,n,!1,null,null,null);e["a"]=f.exports},fd2d:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-footer",[a("v-card",{staticClass:"text-center",attrs:{flat:"",tile:"",width:"100%"}},[t.isStaff?a("v-card-text",t._l(t.staff,(function(e,r){return a("router-link",{key:r,attrs:{to:e.to}},[a("v-btn",{staticClass:"mx-1",attrs:{icon:""}},[a("v-icon",{attrs:{size:"20px"}},[t._v(" "+t._s(e.icon)+" ")])],1)],1)})),1):a("v-card-text",[a("router-link",{attrs:{to:"/sales"}},[a("v-btn",{staticClass:"mx-1",attrs:{icon:""}},[a("v-icon",{attrs:{size:"20px"}},[t._v(" mdi-currency-usd ")])],1)],1),a("router-link",{attrs:{to:{name:"ViewStore",params:{id:t.data_store.unique_id}}}},[a("v-btn",{staticClass:"mx-1",attrs:{icon:""}},[a("v-icon",{attrs:{size:"20px"}},[t._v(" mdi-shopping ")])],1)],1),a("router-link",{attrs:{to:"/profile"}},[a("v-btn",{staticClass:"mx-1",attrs:{icon:""}},[a("v-icon",{attrs:{size:"20px"}},[t._v(" mdi-account ")])],1)],1),t._l(t.items,(function(e,r){return a("router-link",{key:r,attrs:{to:e.to}},[a("v-btn",{staticClass:"mx-1",attrs:{icon:""}},[a("v-icon",{attrs:{size:"20px"}},[t._v(" "+t._s(e.icon)+" ")])],1)],1)}))],2)],1)],1)},n=[],s={name:"FooterNav",data:function(){return{staff:[{icon:"mdi-currency-usd",to:"/sales"},{icon:"mdi-shopping",to:"/stores"},{icon:"mdi-account-supervisor",to:"/users"},{icon:"mdi-credit-card-outline",to:"/payments"},{icon:"mdi-account-group",to:"/referrals"},{icon:"mdi-file-document-outline",to:"/invoices"}],items:[{icon:"mdi-credit-card-outline",to:"/payments"},{icon:"mdi-account-group",to:"/referrals"},{icon:"mdi-file-document-outline",to:"/invoices"}]}},computed:{data_store:function(){return this.$store.state.auth.store_user},isStaff:function(){return!!this.$store.state.auth.user.is_staff}}},i=s,o=a("2877"),u=Object(o["a"])(i,r,n,!1,null,null,null);e["a"]=u.exports}}]);
//# sourceMappingURL=Profile.9e2e8500.js.map