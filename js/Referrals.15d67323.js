(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Referrals"],{1182:function(t,e,r){},"27ad":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("nav-bar",{attrs:{name:t.title}}),r("v-container",{staticClass:"text-center"},[r("router-link",{attrs:{to:"/addreferral"}},[r("v-btn",{attrs:{color:"#E47911",large:"",height:"40px",dark:""}},[r("v-icon",{attrs:{left:"",dark:""}},[t._v(" mdi-plus ")]),t._v(" Add a new referral ")],1)],1)],1),r("v-card",{staticClass:"ma-auto pb-5",attrs:{width:"90%",outlined:""}},[r("v-container",{staticClass:"text-center"},[r("v-card",[r("v-layout",[r("v-col",{staticClass:"text-right",attrs:{cols:"11"}},[r("v-btn",{staticClass:"mx-auto",attrs:{icon:"",right:""},on:{click:t.activeDelete}},[r("v-icon",{attrs:{size:"24px",color:t.delete_btn_color}},[t._v(" mdi-delete ")])],1)],1)],1),r("v-card-title",[r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),r("v-data-table",{attrs:{headers:t.headers,search:t.search,items:t.referrals,loading:t.loading,"loading-text":"Loading... Please wait","hide-default-footer":"",page:t.page,"items-per-page":t.itemsPerPage},on:{"update:page":function(e){t.page=e},"page-count":function(e){t.pageCount=e}},scopedSlots:t._u([{key:"item.unique_id",fn:function(e){var a=e.item;return[t.select?r("v-menu",{attrs:{top:"","offset-x":""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[r("v-btn",t._g(t._b({attrs:{icon:"",dark:""}},"v-btn",n,!1),a),[r("v-icon",{staticClass:"mb-2",attrs:{right:"",color:"#E47911",size:"26px"}},[t._v(" mdi-arrow-down-drop-circle ")])],1)]}}],null,!0)},[r("v-list",[r("v-list-item",{attrs:{link:""}},[r("v-list-item-title",[r("router-link",{attrs:{to:{name:"UpdateReferral",params:{id:a.unique_id}}}},[t._v(" Update referral ")])],1)],1)],1)],1):r("v-checkbox",{staticClass:"my-n3",attrs:{value:a.unique_id,color:"#E47911"},model:{value:t.idReferral,callback:function(e){t.idReferral=e},expression:"idReferral"}})]}}])})],1),r("br"),r("v-pagination",{attrs:{length:t.pageCount},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t.select?t._e():r("v-row",[r("v-col",[r("v-btn",{staticClass:"mx-4 my-2",attrs:{color:"#989898",dark:""},on:{click:t.desactivarBtn}},[t._v(" CANCEL ")]),r("v-btn",{staticClass:"mx-4 my-2",attrs:{color:"#E47911",dark:""},on:{click:t.delete_referrals}},[t._v(" DELETE ")])],1)],1)],1)],1),r("footer-nav")],1)},n=[],i=(r("4160"),r("4fad"),r("159b"),r("3835")),o=r("d000"),s=r("fd2d"),c=r("65b4"),u=r("3d20"),l=r.n(u),d={components:{NavBar:o["a"],FooterNav:s["a"]},data:function(){return{title:"REFERRALS",select:!0,delete_btn_color:"#000",loading:!0,page:1,pageCount:0,itemsPerPage:5,search:"",referrals:[],idReferral:[],headers:[{text:"Referral",value:"name"},{text:"Date",value:"registered"},{text:"Referred to",value:"by"},{text:"Actions",value:"unique_id",sortable:!1,search:!1}]}},computed:{isStaff:function(){return!!this.$store.state.auth.user.is_staff},idStore:function(){return this.isStaff?"":this.$store.state.auth.store_user.unique_id}},mounted:function(){this.refresh_list()},methods:{activeDelete:function(){this.select=!this.select,this.delete_btn_color=this.select?"#000":"#E47911"},desactivarBtn:function(){this.select=!this.select,this.delete_btn_color="#000"},refresh_list:function(){var t=this;this.loading=!0,this.isStaff?c["a"].list_admin().then((function(e){t.referrals=e,t.loading=!1})).catch((function(t){var e=t.response.data,r="";Object.entries(e).forEach((function(t){var e=Object(i["a"])(t,2),a=e[0],n=e[1];r+=a+": "+n+" \n "})),l.a.fire({icon:"error",title:"Error",text:r})})):c["a"].list_referrals_store(this.idStore).then((function(e){console.log(e),t.referrals=e,t.loading=!1})).catch((function(t){var e=t.response.data,r="";Object.entries(e).forEach((function(t){var e=Object(i["a"])(t,2),a=e[0],n=e[1];r+=a+": "+n+" \n "})),l.a.fire({icon:"error",title:"Error",text:r})}))},delete_referrals:function(){var t=this;c["a"].delete_referrals(this.idReferral).then((function(e){l.a.fire({icon:"success",title:"Success",text:"Successful elimination"}).then((function(){t.refresh_list()}))})).catch((function(t){var e=t.response.data,r="";Object.entries(e).forEach((function(t){var e=Object(i["a"])(t,2),a=e[0],n=e[1];r+=a+": "+n+" \n "})),l.a.fire({icon:"error",title:"Error",text:r})}))}}},f=d,p=r("2877"),v=Object(p["a"])(f,a,n,!1,null,null,null);e["default"]=v.exports},"34ba":function(t,e,r){"use strict";r("1182")},"35ca":function(t,e,r){"use strict";var a=r("d4ec"),n=r("bee2"),i=r("ab58"),o=(r("3d20"),function(){function t(){Object(a["a"])(this,t)}return Object(n["a"])(t,[{key:"list_admin",value:function(){return i["a"].get("admin/users/").then((function(t){return t.data}))}},{key:"delete",value:function(t){return i["a"].delete("admin/users/"+t+"/").then((function(t){return t.data}))}},{key:"register",value:function(t){var e=new FormData;return e.append("email",t.email),e.append("username",t.username),e.append("img",t.img),e.append("is_staff",t.staff),e.append("phone_number",t.phone),e.append("password",t.password),e.append("confirm_password",t.confirm_password),e.append("first_name",t.firstname),e.append("last_name",t.lastname),i["a"].post("admin/users/",e,{headers:{"content-type":"multipart/form-data"}}).then((function(t){return t.data}))}},{key:"update",value:function(t,e){var r=new FormData;return r.append("email",t.email),r.append("username",t.username),r.append("is_staff",t.staff),t.img&&r.append("img",t.img),r.append("phone_number",t.phone),r.append("first_name",t.firstname),r.append("last_name",t.lastname),i["a"].put("user/"+e+"/update_user/",r,{headers:{"content-type":"multipart/form-data"}}).then((function(t){return t.data}))}},{key:"get",value:function(t){return i["a"].get("admin/users/"+t+"/").then((function(t){return t.data}))}},{key:"get_profile",value:function(){return i["a"].get("user/profile/").then((function(t){return t.data}))}},{key:"update_profile",value:function(t,e){var r=new FormData;return r.append("email",t.email),r.append("username",t.username),r.append("is_staff",!1),t.img&&r.append("img",t.img),r.append("phone_number",t.phone),r.append("first_name",t.firstname),r.append("last_name",t.lastname),i["a"].put("user/"+e+"/update_user/",r,{headers:{"content-type":"multipart/form-data"}}).then((function(t){return t.data}))}}]),t}());e["a"]=new o},"65b4":function(t,e,r){"use strict";r("b0c0");var a=r("d4ec"),n=r("bee2"),i=r("ab58"),o=(r("3d20"),function(){function t(){Object(a["a"])(this,t)}return Object(n["a"])(t,[{key:"list_admin",value:function(){return i["a"].get("referral/all/").then((function(t){return t.data}))}},{key:"list_referrals_store",value:function(t){return i["a"].get("referral/"+t+"/stores/").then((function(t){return t.data}))}},{key:"list_user_referrals",value:function(t){return i["a"].get("referral/"+t+"/user_referrals/").then((function(t){return t.data}))}},{key:"add_referral",value:function(t){return i["a"].post("referral/",{store_owner:t.store_owner,name:t.name,destination_email:t.destination_email,phone_number:t.phone_number}).then((function(t){return t.data}))}},{key:"list_owners",value:function(){return i["a"].get("stores_owner/").then((function(t){return t.data}))}},{key:"delete_referrals",value:function(t){return i["a"].post("referral/remove_referrals/",{id_referrals:t})}},{key:"update",value:function(t,e){return i["a"].put("referral/"+e+"/",{store_owner:t.store_owner,name:t.name,destination_email:t.destination_email,phone_number:t.phone_number}).then((function(t){return t.data}))}},{key:"get",value:function(t){return i["a"].get("referral/"+t+"/").then((function(t){return t.data}))}}]),t}());e["a"]=new o},d000:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-toolbar",{attrs:{dense:"",color:"#000",dark:""}},[r("v-btn",{attrs:{icon:""}},[r("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}})],1),r("v-toolbar-title",[t._v(t._s(t.name))]),r("v-spacer"),r("v-btn",{attrs:{icon:""},on:{click:function(e){return t.logout()}}},[r("v-icon",[t._v(" mdi-logout ")])],1)],1),r("v-navigation-drawer",{attrs:{absolute:"",temporary:"",color:"#000",dark:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[r("v-list",{attrs:{nav:"",dense:""}},[r("v-list-item-group",{attrs:{"active-class":"gray--text text--accent-4",dark:""},model:{value:t.group,callback:function(e){t.group=e},expression:"group"}},[r("router-link",{attrs:{to:"/dashboard"}},[r("v-list-item",[r("v-icon",[t._v(" mdi-home ")]),t._v(" "),r("v-list-item-title",[t._v(" HOME ")])],1)],1),r("router-link",{attrs:{to:"/contact"}},[r("v-list-item",[r("v-icon",[t._v(" mdi-phone ")]),t._v(" "),r("v-list-item-title",[t._v(" CONTACT ")])],1)],1),r("router-link",{attrs:{to:"/faqs"}},[r("v-list-item",[r("v-icon",[t._v(" mdi-home ")]),t._v(" "),r("v-list-item-title",[t._v(" FAQ'S ")])],1)],1),r("router-link",{attrs:{to:"/profile"}},[r("v-list-item",[r("v-icon",[t._v(" mdi-account ")]),t._v(" "),r("v-list-item-title",[t._v(" PROFILE ")])],1)],1)],1)],1)],1)],1)},n=[],i=(r("4160"),r("4fad"),r("159b"),r("3835")),o=r("35ca"),s=r("3d20"),c=r.n(s),u={name:"NavBar",props:["name"],data:function(){return{drawer:!1,group:null}},mounted:function(){var t=this;o["a"].get_profile().then().catch((function(e){var r=e.response.data,a="";Object.entries(r).forEach((function(t){var e=Object(i["a"])(t,2),r=e[0],n=e[1];a+=r+": "+n+" \n "})),console.log(e.response.status),401==e.response.status?c.a.fire({icon:"error",title:"Error",text:"Session expired. Please log in again."}).then((function(){localStorage.removeItem("user"),t.$router.push("/")})):c.a.fire({icon:"error",title:"Error",text:a})}))},computed:{loggedIn:function(){return this.$store.state.auth.status.loggedIn}},methods:{logout:function(){this.$store.dispatch("auth/logout")}},watch:{group:function(){this.drawer=!1}}},l=u,d=(r("34ba"),r("2877")),f=Object(d["a"])(l,a,n,!1,null,null,null);e["a"]=f.exports},fd2d:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-footer",[r("v-card",{staticClass:"text-center",attrs:{flat:"",tile:"",width:"100%"}},[t.isStaff?r("v-card-text",t._l(t.staff,(function(e,a){return r("router-link",{key:a,attrs:{to:e.to}},[r("v-btn",{staticClass:"mx-1",attrs:{icon:""}},[r("v-icon",{attrs:{size:"20px"}},[t._v(" "+t._s(e.icon)+" ")])],1)],1)})),1):r("v-card-text",[r("router-link",{attrs:{to:"/sales"}},[r("v-btn",{staticClass:"mx-1",attrs:{icon:""}},[r("v-icon",{attrs:{size:"20px"}},[t._v(" mdi-currency-usd ")])],1)],1),r("router-link",{attrs:{to:{name:"ViewStore",params:{id:t.data_store.unique_id}}}},[r("v-btn",{staticClass:"mx-1",attrs:{icon:""}},[r("v-icon",{attrs:{size:"20px"}},[t._v(" mdi-shopping ")])],1)],1),r("router-link",{attrs:{to:"/profile"}},[r("v-btn",{staticClass:"mx-1",attrs:{icon:""}},[r("v-icon",{attrs:{size:"20px"}},[t._v(" mdi-account ")])],1)],1),t._l(t.items,(function(e,a){return r("router-link",{key:a,attrs:{to:e.to}},[r("v-btn",{staticClass:"mx-1",attrs:{icon:""}},[r("v-icon",{attrs:{size:"20px"}},[t._v(" "+t._s(e.icon)+" ")])],1)],1)}))],2)],1)],1)},n=[],i={name:"FooterNav",data:function(){return{staff:[{icon:"mdi-currency-usd",to:"/sales"},{icon:"mdi-shopping",to:"/stores"},{icon:"mdi-account-supervisor",to:"/users"},{icon:"mdi-credit-card-outline",to:"/payments"},{icon:"mdi-account-group",to:"/referrals"},{icon:"mdi-file-document-outline",to:"/invoices"}],items:[{icon:"mdi-credit-card-outline",to:"/payments"},{icon:"mdi-account-group",to:"/referrals"},{icon:"mdi-file-document-outline",to:"/invoices"}]}},computed:{data_store:function(){return this.$store.state.auth.store_user},isStaff:function(){return!!this.$store.state.auth.user.is_staff}}},o=i,s=r("2877"),c=Object(s["a"])(o,a,n,!1,null,null,null);e["a"]=c.exports}}]);
//# sourceMappingURL=Referrals.15d67323.js.map