(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Referrals"],{"27ad":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("nav-bar",{attrs:{name:e.title}}),r("v-container",{staticClass:"text-center"},[r("router-link",{attrs:{to:"/addreferral"}},[r("v-btn",{attrs:{color:"#E47911",large:"",height:"40px",dark:""}},[r("v-icon",{attrs:{left:"",dark:""}},[e._v(" mdi-plus ")]),e._v(" Add a new referral ")],1)],1)],1),r("v-card",{staticClass:"ma-auto pb-5",attrs:{width:"90%",outlined:""}},[r("v-container",{staticClass:"text-center"},[r("v-card",[r("v-layout",[r("v-col",{staticClass:"text-right",attrs:{cols:"11"}},[r("v-btn",{staticClass:"mx-auto",attrs:{icon:"",right:""},on:{click:e.activeDelete}},[r("v-icon",{attrs:{size:"24px",color:e.delete_btn_color}},[e._v(" mdi-delete ")])],1)],1)],1),r("v-card-title",[r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-data-table",{attrs:{headers:e.headers,search:e.search,items:e.referrals,loading:e.loading,"loading-text":"Loading... Please wait","hide-default-footer":"",page:e.page,"items-per-page":e.itemsPerPage},on:{"update:page":function(t){e.page=t},"page-count":function(t){e.pageCount=t}},scopedSlots:e._u([{key:"item.unique_id",fn:function(t){var a=t.item;return[e.select?r("v-menu",{attrs:{top:"","offset-x":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,n=t.attrs;return[r("v-btn",e._g(e._b({attrs:{icon:"",dark:""}},"v-btn",n,!1),a),[r("v-icon",{staticClass:"mb-2",attrs:{right:"",color:"#E47911",size:"26px"}},[e._v(" mdi-arrow-down-drop-circle ")])],1)]}}],null,!0)},[r("v-list",[r("v-list-item",{attrs:{link:""}},[r("v-list-item-title",[r("router-link",{attrs:{to:{name:"UpdateReferral",params:{id:a.unique_id}}}},[e._v(" Update referral ")])],1)],1)],1)],1):r("v-checkbox",{staticClass:"my-n3",attrs:{value:a.unique_id,color:"#E47911"},model:{value:e.idReferral,callback:function(t){e.idReferral=t},expression:"idReferral"}})]}}])})],1),r("br"),r("v-pagination",{attrs:{length:e.pageCount},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}),e.select?e._e():r("v-row",[r("v-col",[r("v-btn",{staticClass:"mx-4 my-2",attrs:{color:"#989898",dark:""},on:{click:e.desactivarBtn}},[e._v(" CANCEL ")]),r("v-btn",{staticClass:"mx-4 my-2",attrs:{color:"#E47911",dark:""},on:{click:e.delete_referrals}},[e._v(" DELETE ")])],1)],1)],1)],1),r("footer-nav")],1)},n=[],i=(r("4160"),r("4fad"),r("159b"),r("3835")),o=r("d000"),s=r("fd2d"),c=r("65b4"),l=r("3d20"),u=r.n(l),d={components:{NavBar:o["a"],FooterNav:s["a"]},data:function(){return{title:"REFERRALS",select:!0,delete_btn_color:"#000",loading:!0,page:1,pageCount:0,itemsPerPage:5,search:"",referrals:[],idReferral:[],headers:[{text:"Referral",value:"name"},{text:"Date",value:"registered"},{text:"Referred to",value:"by"},{text:"Actions",value:"unique_id",sortable:!1,search:!1}]}},computed:{isStaff:function(){return!!this.$store.state.auth.user.is_staff},idStore:function(){return this.isStaff?"":this.$store.state.auth.store_user.unique_id}},mounted:function(){this.refresh_list()},methods:{activeDelete:function(){this.select=!this.select,this.delete_btn_color=this.select?"#000":"#E47911"},desactivarBtn:function(){this.select=!this.select,this.delete_btn_color="#000"},refresh_list:function(){var e=this;this.loading=!0,this.isStaff?c["a"].list_admin().then((function(t){e.referrals=t,e.loading=!1})).catch((function(e){var t=e.response.data,r="";Object.entries(t).forEach((function(e){var t=Object(i["a"])(e,2),a=t[0],n=t[1];r+=a+": "+n+" \n "})),u.a.fire({icon:"error",title:"Error",text:r})})):c["a"].list_referrals_store(this.idStore).then((function(t){console.log(t),e.referrals=t,e.loading=!1})).catch((function(e){var t=e.response.data,r="";Object.entries(t).forEach((function(e){var t=Object(i["a"])(e,2),a=t[0],n=t[1];r+=a+": "+n+" \n "})),u.a.fire({icon:"error",title:"Error",text:r})}))},delete_referrals:function(){var e=this;c["a"].delete_referrals(this.idReferral).then((function(t){u.a.fire({icon:"success",title:"Success",text:"Successful elimination"}).then((function(){e.refresh_list()}))})).catch((function(e){console.log(e.response.data),u.a.fire({icon:"error",title:"Error",text:e.response.data})}))}}},f=d,v=r("2877"),h=Object(v["a"])(f,a,n,!1,null,null,null);t["default"]=h.exports},"65b4":function(e,t,r){"use strict";r("b0c0");var a=r("d4ec"),n=r("bee2"),i=r("ab58"),o=r("3d20"),s=r.n(o),c=function(){function e(){Object(a["a"])(this,e)}return Object(n["a"])(e,[{key:"list_admin",value:function(){return i["a"].get("referral/all/").then((function(e){return e.data}))}},{key:"list_referrals_store",value:function(e){return i["a"].get("referral/"+e+"/stores/").then((function(e){return e.data}))}},{key:"add_referral",value:function(e){return i["a"].post("referral/",{store_owner:e.store_owner,name:e.name,destination_email:e.destination_email,phone_number:e.phone_number}).then((function(e){return e.data}))}},{key:"list_owners",value:function(){return i["a"].get("stores_owner/").then((function(e){return e.data}))}},{key:"delete_referrals",value:function(e){return i["a"].post("referral/remove_referrals/",{id_referrals:e})}},{key:"update",value:function(e,t){return i["a"].put("referral/"+t+"/",{store_owner:e.store_owner,name:e.name,destination_email:e.destination_email,phone_number:e.phone_number}).then((function(e){return e.data})).catch((function(e){console.log(e.response.data),s.a.fire({icon:"error",title:"Error",text:e.response.data["non_field_errors"]})}))}},{key:"get",value:function(e){return i["a"].get("referral/"+e+"/").then((function(e){return e.data})).catch((function(e){console.log(e.response.data),s.a.fire({icon:"error",title:"Error",text:e.response.data["non_field_errors"]})}))}}]),e}();t["a"]=new c},fd2d:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-footer",[r("v-card",{staticClass:"text-center",attrs:{flat:"",tile:"",width:"100%"}},[e.isStaff?r("v-card-text",e._l(e.modules,(function(t,a){return r("router-link",{key:a,attrs:{to:t.to}},[r("v-btn",{staticClass:"mx-4",attrs:{icon:""}},[r("v-icon",{attrs:{size:"24px"}},[e._v(" "+e._s(t.icon)+" ")])],1)],1)})),1):r("v-card-text",e._l(e.items,(function(t,a){return r("router-link",{key:a,attrs:{to:t.to}},[r("v-btn",{staticClass:"mx-4",attrs:{icon:""}},[r("v-icon",{attrs:{size:"24px"}},[e._v(" "+e._s(t.icon)+" ")])],1)],1)})),1)],1)],1)},n=[],i={name:"FooterNav",data:function(){return{modules:[{icon:"mdi-currency-usd",to:"/sales"},{icon:"mdi-shopping",to:"/stores"},{icon:"mdi-account-supervisor",to:"/users"},{icon:"mdi-credit-card-outline",to:"/payments"},{icon:"mdi-account-group",to:"/referrals"},{icon:"mdi-file-document-outline",to:"/invoices"}],items:[{icon:"mdi-currency-usd",to:"/sales"},{icon:"mdi-shopping",to:"/viewstore"},{icon:"mdi-credit-card-outline",to:"/payments"},{icon:"mdi-account-group",to:"/referrals"},{icon:"mdi-file-document-outline",to:"/invoices"}]}},computed:{isStaff:function(){return!!this.$store.state.auth.user.is_staff}}},o=i,s=r("2877"),c=Object(s["a"])(o,a,n,!1,null,null,null);t["a"]=c.exports}}]);
//# sourceMappingURL=Referrals.38f157a9.js.map