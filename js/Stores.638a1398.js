(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Stores"],{"60c6":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav-bar",{attrs:{name:t.title}}),a("v-container",{staticClass:"text-center"},[a("router-link",{attrs:{to:"/addstore"}},[a("v-btn",{attrs:{color:"#E47911",large:"",height:"40px",dark:""}},[a("v-icon",{attrs:{left:"",dark:""}},[t._v(" mdi-plus ")]),t._v(" Add a new store ")],1)],1)],1),a("v-card",{staticClass:"ma-auto pb-5",attrs:{width:"90%",outlined:""}},[a("v-container",{staticClass:"text-center"},[a("v-card",[a("v-layout",[a("v-col",{staticClass:"text-right",attrs:{cols:"10"}},[a("v-btn",{staticClass:"mx-auto",attrs:{icon:""},on:{click:t.activeExport}},[a("v-icon",{attrs:{size:"24px",color:t.export_btn_color}},[t._v(" mdi-file-move ")])],1)],1),a("v-col",{staticClass:"text-right",attrs:{cols:"2"}},[a("v-btn",{staticClass:"mx-auto",attrs:{icon:""},on:{click:t.activeDelete}},[a("v-icon",{attrs:{size:"24px",color:t.delete_btn_color}},[t._v(" mdi-delete ")])],1)],1)],1),a("v-card-title",[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{attrs:{headers:t.headers,search:t.search,items:t.stores,loading:t.loading,"loading-text":"Loading... Please wait","hide-default-footer":"",page:t.page,"items-per-page":t.itemsPerPage},on:{"update:page":function(e){t.page=e},"page-count":function(e){t.pageCount=e}},scopedSlots:t._u([{key:"item.name",fn:function(e){var r=e.item;return[t._v(" "+t._s(r.name)+" | "),a("router-link",{attrs:{to:{name:"ViewStore",params:{id:r.unique_id}}}},[t._v(" View Store "),a("v-icon",{staticClass:"ml-1",attrs:{color:"#E47911",size:"16px"}},[t._v(" mdi-eye ")])],1)]}},{key:"item.status",fn:function(e){var r=e.item;return[a("v-chip",{attrs:{color:t.getColor(r.status),dark:""}},[t._v(" "+t._s(t._f("name_status")(r.status))+" ")])]}},{key:"item.unique_id",fn:function(e){var r=e.item;return[t.select?a("v-menu",{attrs:{top:"","offset-x":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:"",dark:""}},"v-btn",n,!1),r),[a("v-icon",{staticClass:"mb-2",attrs:{right:"",color:"#E47911",size:"26px"}},[t._v(" mdi-arrow-down-drop-circle ")])],1)]}}],null,!0)},[a("v-list",[a("v-list-item",{attrs:{link:""}},[a("v-list-item-title",[a("router-link",{attrs:{to:{name:"UpdateStore",params:{id:r.unique_id}}}},[t._v(" Update store ")])],1)],1),a("v-list-item",{attrs:{link:""}},[a("v-list-item-title",[a("router-link",{attrs:{to:{name:"AddWalmart",params:{id:r.unique_id}}}},[t._v(" Add walmart info to store ")])],1)],1),a("v-list-item",{attrs:{link:""},on:{click:function(e){return t.delete_store(r.unique_id)}}},[a("v-list-item-title",[t._v(" Delete register ")])],1)],1)],1):a("v-checkbox",{staticClass:"my-n3",attrs:{value:r.unique_id,color:"#E47911"},model:{value:t.idStore,callback:function(e){t.idStore=e},expression:"idStore"}})]}}])})],1),a("br"),a("v-pagination",{attrs:{length:t.pageCount},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t.select?t._e():a("v-row",[a("v-col",[a("v-btn",{staticClass:"mx-4 my-2",attrs:{color:"#989898",dark:""},on:{click:t.desactivarBtn}},[t._v(" CANCEL ")]),t.change?a("v-btn",{staticClass:"mx-4 my-2",attrs:{color:"#E47911",dark:"",loading:t.loading_exp},on:{click:t.export_stores}},[t._v(" EXPORT ")]):t._e(),t.change?t._e():a("v-btn",{staticClass:"mx-4 my-2",attrs:{color:"#E47911",dark:"",loading:t.loading_del},on:{click:t.delete_stores}},[t._v(" DELETE ")])],1)],1)],1)],1),a("footer-nav")],1)},n=[],i=(a("4160"),a("4fad"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("2b3d"),a("3835")),o=a("d000"),s=a("fd2d"),c=a("02e9"),l=a("3d20"),d=a.n(l),u={components:{NavBar:o["a"],FooterNav:s["a"]},data:function(){return{title:"STORES",select:!0,change:!0,loading:!0,loading_exp:!1,loading_del:!1,export_btn_color:"#000",delete_btn_color:"#000",page:1,pageCount:0,itemsPerPage:5,search:"",stores:[],idStore:[],headers:[{text:"Store",value:"name"},{text:"Status",value:"status"},{text:"Actions",value:"unique_id",sortable:!1,search:!1}]}},mounted:function(){var t=this;c["a"].list_admin().then((function(e){t.stores=e,t.loading=!1})).catch((function(e){var a=e.response.data,r="";Object.entries(a).forEach((function(t){var e=Object(i["a"])(t,2),a=e[0],n=e[1];r+=a+": "+n+" \n "})),t.loading=!1,d.a.fire({icon:"error",title:"Error",text:r})}))},filters:{name_status:function(t){switch(t){case"A":return"Active";case"ED":return"Everyday";case"S":return"Suspended";case"V":return"Vacation";case"DA":return"Denied activation";default:return"Pending activation"}}},methods:{activeExport:function(){this.change=!0,this.select=!this.select,this.export_btn_color=this.select?"#000":"#E47911",this.delete_btn_color="#000"},activeDelete:function(){this.change=!1,this.select=!this.select,this.delete_btn_color=this.select?"#000":"#E47911",this.export_btn_color="#000"},desactivarBtn:function(){this.select=!this.select,this.export_btn_color="#000",this.delete_btn_color="#000"},getColor:function(t){return"A"==t?"green":"ED"==t?"purple":"S"==t?"red":"DA"==t?"gray":"V"==t?"yellow":"orange"},refresh_list:function(){var t=this;c["a"].list_admin().then((function(e){t.stores=e,t.loading=!1})).catch((function(e){var a=e.response.data,r="";Object.entries(a).forEach((function(t){var e=Object(i["a"])(t,2),a=e[0],n=e[1];r+=a+": "+n+" \n "})),t.loading=!1,d.a.fire({icon:"error",title:"Error",text:r})}))},delete_stores:function(){var t=this;this.loading_del=!0,c["a"].delete_stores(this.idStore).then((function(e){t.loading_del=!1,d.a.fire({icon:"success",title:"Success",text:e["message"]}).then((function(){t.refresh_list()}))})).catch((function(e){var a=e.response.data,r="";Object.entries(a).forEach((function(t){var e=Object(i["a"])(t,2),a=e[0],n=e[1];r+=a+": "+n+" \n "})),t.loading=!1,d.a.fire({icon:"error",title:"Error",text:r})}))},export_stores:function(){var t=this;this.loading_exp=!0,c["a"].export_stores(this.idStore).then((function(e){var a=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=a,r.setAttribute("download","stores.xlsx"),document.body.appendChild(r),r.click(),t.loading_exp=!1})).catch((function(e){var a=e.response.data,r="";Object.entries(a).forEach((function(t){var e=Object(i["a"])(t,2),a=e[0],n=e[1];r+=a+": "+n+" \n "})),t.loading=!1,d.a.fire({icon:"error",title:"Error",text:r})}))},delete_store:function(t){var e=this;d.a.fire({icon:"question",title:"Confirm",text:"Are you sure you want to delete this store?",confirmButtonText:"YES",cancelButtonText:"NO",showCancelButton:!0}).then((function(a){a.isConfirmed&&(c["a"].delete(t),d.a.fire({icon:"success",title:"Success",text:"Store successfully removed."}).then((function(){e.refresh_list()})).catch((function(t){var a=t.response.data,r="";Object.entries(a).forEach((function(t){var e=Object(i["a"])(t,2),a=e[0],n=e[1];r+=a+": "+n+" \n "})),e.loading=!1,d.a.fire({icon:"error",title:"Error",text:r})})))}))}}},v=u,f=a("2877"),h=Object(f["a"])(v,r,n,!1,null,null,null);e["default"]=h.exports}}]);
//# sourceMappingURL=Stores.638a1398.js.map