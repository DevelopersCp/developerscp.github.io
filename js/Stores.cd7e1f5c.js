(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Stores"],{"02e9":function(t,e,n){"use strict";n("b0c0");var a=n("d4ec"),r=n("bee2"),s=n("ab58"),o=(n("3d20"),function(){function t(){Object(a["a"])(this,t)}return Object(r["a"])(t,[{key:"list_admin",value:function(){return s["a"].get("admin/stores/").then((function(t){return t.data}))}},{key:"list_customer",value:function(){return s["a"].get("stores_owner/").then((function(t){return t.data}))}},{key:"stores_owned",value:function(t){return s["a"].get("stores_owner/"+t+"/stores/").then((function(t){return t.data}))}},{key:"add_store_customer",value:function(t){return s["a"].post("stores_owner/",{name:t.name,email:t.email,phone_number:t.phone_number,address:t.address,zipcode:t.zipcode,state:t.state,status:t.status}).then((function(t){return t.data}))}},{key:"add_store_admin",value:function(t){return s["a"].post("admin/stores/",{name:t.name,email:t.email,phone_number:t.phone_number,address:t.address,zipcode:t.zipcode,state:t.state,status:t.status}).then((function(t){return t.data}))}},{key:"add_owner",value:function(t,e){return s["a"].post("admin/stores/"+e+"/add_owner/",{user:t}).then((function(t){return t.data}))}},{key:"remove_owner",value:function(t){return s["a"].delete("stores_owner/"+t+"/").then((function(t){return t.data}))}},{key:"update",value:function(t,e){return s["a"].put("stores_owner/"+e+"/",{name:t.name,email:t.email,phone_number:t.phone_number,address:t.address,zipcode:t.zipcode,state:t.state,status:t.status}).then((function(t){return t.data}))}},{key:"delete",value:function(t){return s["a"].delete("admin/stores/"+t+"/").then((function(t){return t.data}))}},{key:"get_info",value:function(t){return s["a"].get("stores_owner/"+t+"/").then((function(t){return t.data}))}},{key:"get_walmart",value:function(t){return s["a"].get("walmart/"+t+"/store/").then((function(t){return t.data}))}},{key:"list_owners",value:function(t){return s["a"].get("stores_owner/"+t+"/owners/").then((function(t){return t.data}))}},{key:"delete_stores",value:function(t){return s["a"].post("admin/stores/remove_stores/",{id_stores:t}).then((function(t){return t.data}))}},{key:"export_stores",value:function(t){return s["a"].post("admin/stores/export_stores/",{id_stores:t},{responseType:"blob"}).then((function(t){return t}))}},{key:"add_walmart",value:function(t){return s["a"].post("walmart/",{store:t.store,walmart_username:t.walmart_username,walmart_password:t.walmart_password,last_4_digits_of_the_card:t.card,CVV:parseInt(t.CVV),month:t.month,year:t.year}).then((function(t){return t.data}))}},{key:"update_walmart",value:function(t){return s["a"].put("walmart/"+t.id+"/",{walmart_username:t.username,walmart_password:t.password,last_4_digits_of_the_card:t.card,CVV:parseInt(t.CVV),month:t.month,year:t.year}).then((function(t){return t.data}))}},{key:"send_email",value:function(t){return s["a"].post("admin/stores/send_email/",{subject:t.subject,message:t.message,emails:t.emails}).then((function(t){return t.data}))}},{key:"send_request_info",value:function(t){return s["a"].post("admin/stores/send_information/",{emails:t.emails,message:t.message}).then((function(t){return t.data}))}}]),t}());e["a"]=new o},"60c6":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nav-bar",{attrs:{name:t.title}}),n("v-container",{staticClass:"text-center"},[n("router-link",{attrs:{to:"/addstore"}},[n("v-btn",{attrs:{color:"#E47911",large:"",height:"40px",dark:""}},[n("v-icon",{attrs:{left:"",dark:""}},[t._v(" mdi-plus ")]),t._v(" Add a new store ")],1)],1)],1),n("v-card",{staticClass:"ma-auto pb-5",attrs:{width:"90%",outlined:""}},[n("v-container",{staticClass:"text-center"},[n("v-card",[n("v-layout",[n("v-col",{staticClass:"text-right",attrs:{cols:"10"}},[n("v-btn",{staticClass:"mx-auto",attrs:{icon:""},on:{click:t.activeExport}},[n("v-icon",{attrs:{size:"24px",color:t.export_btn_color}},[t._v(" mdi-file-move ")])],1)],1),n("v-col",{staticClass:"text-right",attrs:{cols:"2"}},[n("v-btn",{staticClass:"mx-auto",attrs:{icon:""},on:{click:t.activeDelete}},[n("v-icon",{attrs:{size:"24px",color:t.delete_btn_color}},[t._v(" mdi-delete ")])],1)],1)],1),n("v-card-title",[n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),n("v-data-table",{attrs:{headers:t.headers,search:t.search,items:t.stores,loading:t.loading,"loading-text":"Loading... Please wait","hide-default-footer":"",page:t.page,"items-per-page":t.itemsPerPage},on:{"update:page":function(e){t.page=e},"page-count":function(e){t.pageCount=e}},scopedSlots:t._u([{key:"item.status",fn:function(e){var a=e.item;return[n("v-chip",{attrs:{color:t.getColor(a.status),dark:""}},[t._v(" "+t._s(t._f("name_status")(a.status))+" ")])]}},{key:"item.unique_id",fn:function(e){var a=e.item;return[t.select?n("v-menu",{attrs:{top:"","offset-x":""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,r=e.attrs;return[n("v-btn",t._g(t._b({attrs:{icon:"",dark:""}},"v-btn",r,!1),a),[n("v-icon",{staticClass:"mb-2",attrs:{right:"",color:"#E47911",size:"26px"}},[t._v(" mdi-arrow-down-drop-circle ")])],1)]}}],null,!0)},[n("v-list",[n("v-list-item",{attrs:{link:""}},[n("v-list-item-title",[n("router-link",{attrs:{to:{name:"UpdateStore",params:{id:a.unique_id}}}},[t._v(" Update store ")])],1)],1),n("v-list-item",{attrs:{link:""}},[n("v-list-item-title",[n("router-link",{attrs:{to:{name:"AddWalmart",params:{id:a.unique_id}}}},[t._v(" Add walmart info to store ")])],1)],1),n("v-list-item",{attrs:{link:""},on:{click:function(e){return t.delete_store(a.unique_id)}}},[n("v-list-item-title",[t._v(" Delete register ")])],1)],1)],1):n("v-checkbox",{staticClass:"my-n3",attrs:{value:a.unique_id,color:"#E47911"},model:{value:t.idStore,callback:function(e){t.idStore=e},expression:"idStore"}})]}}])})],1),n("br"),n("v-pagination",{attrs:{length:t.pageCount},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t.select?t._e():n("v-row",[n("v-col",[n("v-btn",{staticClass:"mx-4 my-2",attrs:{color:"#989898",dark:""},on:{click:t.desactivarBtn}},[t._v(" CANCEL ")]),t.change?n("v-btn",{staticClass:"mx-4 my-2",attrs:{color:"#E47911",dark:"",loading:t.loading_exp},on:{click:t.export_stores}},[t._v(" EXPORT ")]):t._e(),t.change?t._e():n("v-btn",{staticClass:"mx-4 my-2",attrs:{color:"#E47911",dark:"",loading:t.loading_del},on:{click:t.delete_stores}},[t._v(" DELETE ")])],1)],1)],1)],1),n("footer-nav")],1)},r=[],s=(n("4160"),n("4fad"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("2b3d"),n("3835")),o=n("d000"),i=n("fd2d"),c=n("02e9"),l=n("3d20"),u=n.n(l),d={components:{NavBar:o["a"],FooterNav:i["a"]},data:function(){return{title:"STORES",select:!0,change:!0,loading:!0,loading_exp:!1,loading_del:!1,export_btn_color:"#000",delete_btn_color:"#000",page:1,pageCount:0,itemsPerPage:5,search:"",stores:[],idStore:[],headers:[{text:"Store",value:"name"},{text:"Status",value:"status"},{text:"Actions",value:"unique_id",sortable:!1,search:!1}]}},mounted:function(){var t=this;c["a"].list_admin().then((function(e){t.stores=e,t.loading=!1})).catch((function(e){var n=e.response.data,a="";Object.entries(n).forEach((function(t){var e=Object(s["a"])(t,2),n=e[0],r=e[1];a+=n+": "+r+" \n "})),t.loading=!1,u.a.fire({icon:"error",title:"Error",text:a})}))},filters:{name_status:function(t){switch(t){case"A":return"Active";case"ED":return"Everyday";case"S":return"Suspended";case"V":return"Vacation";case"DA":return"Denied activation";default:return"Pending activation"}}},methods:{activeExport:function(){this.change=!0,this.select=!this.select,this.export_btn_color=this.select?"#000":"#E47911",this.delete_btn_color="#000"},activeDelete:function(){this.change=!1,this.select=!this.select,this.delete_btn_color=this.select?"#000":"#E47911",this.export_btn_color="#000"},desactivarBtn:function(){this.select=!this.select,this.export_btn_color="#000",this.delete_btn_color="#000"},getColor:function(t){return"A"==t?"green":"ED"==t?"purple":"S"==t?"red":"DA"==t?"gray":"V"==t?"yellow":"orange"},refresh_list:function(){var t=this;c["a"].list_admin().then((function(e){t.stores=e,t.loading=!1})).catch((function(e){var n=e.response.data,a="";Object.entries(n).forEach((function(t){var e=Object(s["a"])(t,2),n=e[0],r=e[1];a+=n+": "+r+" \n "})),t.loading=!1,u.a.fire({icon:"error",title:"Error",text:a})}))},delete_stores:function(){var t=this;this.loading_del=!0,c["a"].delete_stores(this.idStore).then((function(e){t.loading_del=!1,u.a.fire({icon:"success",title:"Success",text:e["message"]}).then((function(){t.refresh_list()}))})).catch((function(e){var n=e.response.data,a="";Object.entries(n).forEach((function(t){var e=Object(s["a"])(t,2),n=e[0],r=e[1];a+=n+": "+r+" \n "})),t.loading=!1,u.a.fire({icon:"error",title:"Error",text:a})}))},export_stores:function(){var t=this;this.loading_exp=!0,c["a"].export_stores(this.idStore).then((function(e){var n=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=n,a.setAttribute("download","stores.xlsx"),document.body.appendChild(a),a.click(),t.loading_exp=!1})).catch((function(e){var n=e.response.data,a="";Object.entries(n).forEach((function(t){var e=Object(s["a"])(t,2),n=e[0],r=e[1];a+=n+": "+r+" \n "})),t.loading=!1,u.a.fire({icon:"error",title:"Error",text:a})}))},delete_store:function(t){var e=this;u.a.fire({icon:"question",title:"Confirm",text:"Are you sure you want to delete this store?",confirmButtonText:"YES",cancelButtonText:"NO",showCancelButton:!0}).then((function(n){n.isConfirmed&&(c["a"].delete(t),u.a.fire({icon:"success",title:"Success",text:"Store successfully removed."}).then((function(){e.refresh_list()})).catch((function(t){var n=t.response.data,a="";Object.entries(n).forEach((function(t){var e=Object(s["a"])(t,2),n=e[0],r=e[1];a+=n+": "+r+" \n "})),e.loading=!1,u.a.fire({icon:"error",title:"Error",text:a})})))}))}}},_=d,f=n("2877"),m=Object(f["a"])(_,a,r,!1,null,null,null);e["default"]=m.exports}}]);
//# sourceMappingURL=Stores.cd7e1f5c.js.map