(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Users"],{"35ca":function(e,t,a){"use strict";var n=a("d4ec"),r=a("bee2"),i=a("ab58"),s=a("3d20"),o=a.n(s),c=function(){function e(){Object(n["a"])(this,e)}return Object(r["a"])(e,[{key:"list_admin",value:function(){return i["a"].get("admin/users/").then((function(e){return e.data})).catch((function(e){o.a.fire({icon:"error",title:"Error",text:e.response.data})}))}},{key:"delete",value:function(e){return i["a"].delete("admin/users/"+e+"/").then((function(e){return e.data})).catch((function(e){o.a.fire({icon:"error",title:"Error",text:e.response.data})}))}},{key:"register",value:function(e){var t=new FormData;return t.append("email",e.email),t.append("username",e.username),t.append("img",e.img),t.append("is_staff",e.staff),t.append("phone_number",e.phone),t.append("password",e.password),t.append("confirm_password",e.confirm_password),t.append("first_name",e.firstname),t.append("last_name",e.lastname),i["a"].post("admin/users/",t,{headers:{"content-type":"multipart/form-data"}}).then((function(e){return e.data}))}},{key:"update",value:function(e,t){var a=new FormData;return a.append("email",e.email),a.append("username",e.username),a.append("is_staff",e.staff),e.img&&a.append("img",e.img),a.append("phone_number",e.phone),a.append("first_name",e.firstname),a.append("last_name",e.lastname),i["a"].put("user/"+t+"/update_user/",a,{headers:{"content-type":"multipart/form-data"}}).then((function(e){return e.data})).catch((function(e){console.log(e.response.data),o.a.fire({icon:"error",title:"Error",text:e.response.data})}))}},{key:"get",value:function(e){return i["a"].get("admin/users/"+e+"/").then((function(e){return e.data})).catch((function(e){console.log(e.response.data),o.a.fire({icon:"error",title:"Error",text:e.response.data})}))}},{key:"get_profile",value:function(){return i["a"].get("user/profile/").then((function(e){return e.data})).catch((function(e){console.log(e.response.data),o.a.fire({icon:"error",title:"Error",text:e.response.data})}))}},{key:"update_profile",value:function(e,t){var a=new FormData;return a.append("email",e.email),a.append("username",e.username),a.append("is_staff",!1),e.img&&a.append("img",e.img),a.append("phone_number",e.phone),a.append("first_name",e.firstname),a.append("last_name",e.lastname),i["a"].put("user/"+t+"/update_user/",a,{headers:{"content-type":"multipart/form-data"}}).then((function(e){return e.data}))}}]),e}();t["a"]=new c},"4de4":function(e,t,a){"use strict";var n=a("23e7"),r=a("b727").filter,i=a("1dde"),s=a("ae40"),o=i("filter"),c=s("filter");n({target:"Array",proto:!0,forced:!o||!c},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},ed81:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("nav-bar",{attrs:{name:e.title}}),a("v-container",{staticClass:"text-center"},[a("router-link",{attrs:{to:"/adduser"}},[a("v-btn",{attrs:{color:"#E47911",large:"",height:"40px",dark:""}},[a("v-icon",{attrs:{left:"",dark:""}},[e._v(" mdi-plus ")]),e._v(" Add a new user ")],1)],1)],1),a("v-container",{staticClass:"text-center"},[a("v-card",{staticClass:"ma-auto",attrs:{width:"90%",outlined:""}},[a("br"),a("v-card",{staticClass:"ma-auto",attrs:{width:"75%",tile:""}},[a("p",{staticClass:"font-weight-bold text-left px-3 py-1"},[e._v("Types of users")]),a("v-divider"),a("v-expansion-panels",{attrs:{focusable:""}},e._l(e.types,(function(t){return a("v-expansion-panel",{key:t.name},[a("v-expansion-panel-header",{staticClass:"font-weight-light text-left px-2"},[e._v(e._s(t.name))]),a("v-expansion-panel-content",[a("v-card",[a("v-layout",[a("v-col",{staticClass:"text-right"},[a("v-btn",{staticClass:"mx-auto",attrs:{icon:"",right:""},on:{click:e.activeExport}},[a("v-icon",{attrs:{size:"24px",color:e.export_btn_color}},[e._v(" mdi-file-move ")])],1)],1)],1),a("v-card-title",[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{attrs:{headers:e.headers,search:e.search,items:t.value,loading:e.loading,"loading-text":"Loading... Please wait","hide-default-footer":"",page:e.page,"items-per-page":e.itemsPerPage},on:{"update:page":function(t){e.page=t},"page-count":function(t){e.pageCount=t}},scopedSlots:e._u([{key:"item.first_name",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.first_name+" "+a.last_name)+" ")]}},{key:"item.unique_id",fn:function(t){var n=t.item;return[e.select?a("v-menu",{attrs:{top:"","offset-x":""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:"",dark:""}},"v-btn",r,!1),n),[a("v-icon",{staticClass:"mb-2",attrs:{right:"",color:"#E47911",size:"26px"}},[e._v(" mdi-arrow-down-drop-circle ")])],1)]}}],null,!0)},[a("v-list",[a("v-list-item",{attrs:{link:""}},[a("v-list-item-title",[e._v(" Show user profile ")])],1),a("v-list-item",{attrs:{link:""}},[a("v-list-item-title",[a("router-link",{attrs:{to:{name:"UpdateUser",params:{id:n.unique_id}}}},[e._v(" Update user profile ")])],1)],1),a("v-list-item",{attrs:{link:""}},[a("v-list-item-title",{on:{click:function(t){return e.delete_user(n.unique_id)}}},[e._v(" Delete register ")])],1)],1)],1):a("v-checkbox",{staticClass:"my-n3",attrs:{value:n.unique_id,color:"#E47911"},model:{value:e.idUser,callback:function(t){e.idUser=t},expression:"idUser"}})]}}],null,!0)}),a("v-pagination",{attrs:{length:e.pageCount},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1),e.select?e._e():a("v-row",[a("v-col",[a("v-btn",{staticClass:"mx-4 my-2",attrs:{color:"#989898",dark:""},on:{click:e.desactivarBtn}},[e._v(" CANCEL ")]),a("v-btn",{staticClass:"mx-4 my-2",attrs:{color:"#E47911",dark:""},on:{click:e.export_users}},[e._v(" EXPORT ")])],1)],1)],1)],1)})),1)],1),a("br")],1)],1),a("footer-nav")],1)},r=[],i=(a("4de4"),a("4160"),a("4fad"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("2b3d"),a("3835")),s=a("d000"),o=a("fd2d"),c=a("35ca"),l=a("3d20"),u=a.n(l),d={components:{NavBar:s["a"],FooterNav:o["a"]},data:function(){return{title:"USERS",select:!0,export_btn_color:"#000",loading:!0,page:1,pageCount:0,itemsPerPage:5,search:"",users_admin:[],users_clients:[],idUser:[],headers:[{text:"Name",value:"first_name"},{text:"Actions",value:"unique_id",sortable:!1,search:!1}],types:[{name:"Admins",value:[]},{name:"Clients",value:[]}]}},mounted:function(){var e=this;c["a"].list_admin().then((function(t){console.log(t),e.types[0].value=t.filter((function(e){return e.is_staff})),e.types[1].value=t.filter((function(e){return!e.is_staff})),e.loading=!1})).catch((function(e){var t=e.response.data,a="";Object.entries(t).forEach((function(e){var t=Object(i["a"])(e,2),n=t[0],r=t[1];a+=n+": "+r+" \n "})),u.a.fire({icon:"error",title:"Error",text:a})}))},methods:{activeExport:function(){this.select=!this.select,this.export_btn_color=this.select?"#000":"#E47911"},desactivarBtn:function(){this.select=!this.select,this.export_btn_color="#000"},refresh_list:function(){var e=this;this.loading=!0,c["a"].list_admin().then((function(t){e.types[0].value=t.filter((function(e){return e.is_staff})),e.types[1].value=t.filter((function(e){return!e.is_staff})),e.loading=!1})).catch((function(e){var t=e.response.data,a="";Object.entries(t).forEach((function(e){var t=Object(i["a"])(e,2),n=t[0],r=t[1];a+=n+": "+r+" \n "})),u.a.fire({icon:"error",title:"Error",text:a})}))},delete_user:function(e){var t=this;u.a.fire({icon:"question",title:"Confirm",text:"Are you sure you want to delete this user?",confirmButtonText:"YES",cancelButtonText:"NO",showCancelButton:!0}).then((function(a){a.isConfirmed&&(c["a"].delete(e),u.a.fire({icon:"success",title:"Success",text:"User successfully removed."}).then((function(){t.refresh_list()})))})).catch((function(e){var t=e.response.data,a="";Object.entries(t).forEach((function(e){var t=Object(i["a"])(e,2),n=t[0],r=t[1];a+=n+": "+r+" \n "})),u.a.fire({icon:"error",title:"Error",text:a})}))},export_users:function(){c["a"].export_users(this.idUser).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download","users.xlsx"),document.body.appendChild(a),a.click()})).catch((function(e){var t=e.response.data,a="";Object.entries(t).forEach((function(e){var t=Object(i["a"])(e,2),n=t[0],r=t[1];a+=n+": "+r+" \n "})),u.a.fire({icon:"error",title:"Error",text:a})}))}}},p=d,f=a("2877"),m=Object(f["a"])(p,n,r,!1,null,null,null);t["default"]=m.exports}}]);
//# sourceMappingURL=Users.bb29e01e.js.map